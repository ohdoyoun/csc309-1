NavigationModel = function(){
	var self = this; 
	self.urls = {};
	
	self.navigationItems = ko.observableArray();
	self.currentNavigation = ko.observable();
	self.headerItems = ko.observableArray();
	self.currentNavType = ko.observable();
	self.currentPid = ko.observable();
	
	self.setupPrivateMessagesPage = function(){	};
	self.landingPages = {
		Account: "Profile",
		Projects: "My Projects",
		Communities: "Community List",
		ProjectDetails:"Dashboard",
		Login:"Login",
		Logout:"Logout",
		Register:"Register"
	};
	
	self.navigation = {
		"Account": {
			navNum:0,
			"Profile":{content:"/profiles/edit"},
			"Wallet":{content:"/wallets/index"},
			"Account Settings":{content:"/profiles/settings"},
			"Notifications":{content:"/profiles/notifications"}
		},
		"Projects": {
			navNum:0,
			"My Projects":{content:"/projects/mine"},
			"Backed Projects":{content:"/projects/backed"},
			"Discover Projects":{content:"/projects"},
			"Create Project":{content:"/projects/create"},
			"Statistics":{content:"/projects/statistics"}
		},
		"Communities": {
			navNum:0,
			"Community List":{content:"/communities/index"},
			"Search for Communities":{content:"/communities/search"},
			"Create your Community":{content:"/communities/create"}
		},
		"ProjectDetails":{
			navNum:2,
			"Dashboard":{content:"/projects/view/{pId}"},
			"Statistics":{content:"/Projects/Statistics"},
			"Backer Information":{content:"/Projects/BackerInformation"},
			"Surveys":{content:"/Projects/Surveys/Surveys"},
			"Private Messages":{content:"/Projects/PrivateMessages"}
		},
		"Logout":{
			navNum:0,
			"Logout":{content:"/users/logout", hidden:true}			
		},
		"Login":{
			navNum:1,
			"Login":{content:"/users/login", hidden:true}
		},
		"Register":{
			navNum:1,
			"Register":{content:"/users/register", hidden:true}
		}
	};
	
	ko.computed(function(){
		var items = [];
		var navNum = self.currentNavType();
		$.each(self.navigation, function(name, value){
			if(value.navNum === navNum){
				items.push({name:name, nav:name});
			}
		});
		self.headerItems(items);
	});	
	
	self.changePage = function(page){
		var info = self.navigation[self.currentNavigation()][page];
		$("#main-body").remove.apply($("#main-body").children());
		var pageUrl = info.content.replace("{pId}", self.currentPid());
		window.location.href = pageUrl;
		
		$("#flashMessage").hide();
	};
	
	self.changeCurrentNavigationType = function(int){
	    self.currentNavType(int);
	    self.changeCurrentNavigation(self.headerItems()[0].nav);
	}
	
	self.changeCurrentNavigation = function(value){
		if(self.navigation[value]){
			var newNavigations = [];
			$.each(self.navigation[value], function(name, content){
				if(!content.hidden && content.content){
					newNavigations.push({text: name});
				}
			});
			self.navigationItems.removeAll();
			self.navigationItems.push.apply(self.navigationItems, newNavigations);
			self.currentNavigation(value);
		}
	};
	
	self.init = function(){
		$(".header-bar").on("click", "a.header-link", function(event){
		    if(event.target.hasAttribute("data-nav")){
		    	var value = event.target.attributes["data-nav"].value;
			    self.changeCurrentNavigation(value);
			    if(self.navigation[value][self.landingPages[value]].hidden)
					self.changePage(self.landingPages[value]);
		    }
		});
		$("#navigation-links").on("click", "a.nav-link" ,function(event){
		    if(event.target.hasAttribute("data-nav")){
			    self.changePage(event.target.attributes["data-nav"].value);
		    }
		});
	};
}